<#macro dashboardTable items=[] list_available_orders_column=[] order=true unsetColumn=true>
	<#if items?exists && items?size &gt; 0>
	<table>
			<tr> <#-- header -->
				<th>#i18n{portal.dashboard.table.title.name}</th> <#-- name -->
				<th>#i18n{portal.dashboard.table.title.column}</th> <#-- column -->
				<#if order><th>#i18n{portal.dashboard.table.title.order}</th></#if> <#-- order -->
				<#if unsetColumn><th>#i18n{profiles.manage_dashboards.table.title.actions}</th></#if> <#-- unsetColumn -->
			</tr>
		<#list items as dashboard>
				<tr>
					<td>${dashboard.name}</td> <#-- name -->
					<td> <#-- column -->
						<form action="jsp/admin/plugins/profiles/DoMoveDashboard.jsp" method="post">
						<input type="hidden" name="dashboard_name" value="${dashboard.name}"/>
						<#if !dashboard.order?exists || dashboard.order == 0 >
							<#assign dashboard_order=1/>
						<#else>
							<#assign dashboard_order=dashboard.order/>
						</#if>
						<input type="hidden" name="dashboard_order" value="${dashboard_order}"/>
						<input type="hidden" name="view_key" value="${view.key}"/>
						<@combo name="dashboard_column" default_value="${dashboard.zone!}" items=list_available_columns />
						<input type="submit" value="#i18n{portal.dashboard.table.action.setColumn}" class="button"/>
						</form>
					</td> <#-- /column -->
					<#if order>
					<td> <#-- order -->
						<form action="jsp/admin/plugins/profiles/DoMoveDashboard.jsp" method="post">
						<input type="hidden" name="dashboard_name" value="${dashboard.name}"/>
						<#if !dashboard.zone?exists  || dashboard.zone == 0>
							<#assign dashboard_column=1 />
						<#else>
							<#assign dashboard_column=dashboard.zone />
						</#if>
						<input type="hidden" name="dashboard_column" value="${dashboard_column}"/>
						<input type="hidden" name="view_key" value="${view.key}"/>
						<@combo name="dashboard_order" default_value="${dashboard.order!}" items=list_available_orders_column />
						
						<input type="submit" value="#i18n{portal.dashboard.table.action.move}" class="button"/>
						
						</form>
					</td> <#-- /order -->
					</#if>
					<#if unsetColumn>
					<td> <#-- unsetColumn -->
						<form action="jsp/admin/plugins/profiles/DoUnsetColumn.jsp" method="post">
							<input type="hidden" name="dashboard_name" value="${dashboard.name}"/>
							<input type="hidden" name="view_key" value="${view.key}"/>
							<input type="submit" value="#i18n{profiles.manage_dashboards.action.unsetColumn}" class="button"/>
						</form>
					</td> <#-- /unsetColumn -->
					</#if>
				</tr>
		</#list>
		</table>
		<#else>
			<p>
			#i18n{portal.dashboard.message.emptyGroup}
			</p>
		</#if>
</#macro>

<div id="left">
    <div class="content-box" >
    	<h2>#i18n{profiles.manage_views.columnKey} : ${view.key}</h2>
        <table>
            <tr>
                <th>
                     #i18n{profiles.manage_views.columnDescription}
                </th>
            </tr>
            <tr>
                <td>
                    ${view.description}
                </td>
            </tr>
            <tr>
                <th>
                     #i18n{profiles.manage_views.columnActions}
                </th>
            </tr>
            <tr>
                <td>
                	<@item_navigation item_navigator=item_navigator />
                	<#if view.actions?exists>
						<#list view.actions as action>
						 	<a href="${action.url}?view_key=${view.key}">
						  		<img src="${action.iconUrl}" alt="${action.name}" title="${action.description}">
						  	</a>
						</#list>
					</#if>
                </td>
            </tr>
        </table>
    </div>
</div>
<div id="right">
	<div class="content-box">
		<h2>#i18n{portal.dashboard.title.manage}</h2>
		<#-- column lists -->
		<#list list_available_columns as column_refItem>
			<#if column_refItem.code != ''>
				<#assign column_key = column_refItem.code />
				<div class="highlight-box">
					<h2>#i18n{portal.dashboard.title.column} ${column_key}</h2>
					<#if map_column_order_status[column_key]?exists && !map_column_order_status[column_key]>
						<p>
							<a class="alert" href="jsp/admin/plugins/profiles/DoReorderColumn.jsp?column=${column_key}&amp;view_key=${view.key}">#i18n{portal.dashboard.action.reorder}</a>
						</p>
					</#if>
					<@dashboardTable items=map_dashboards[column_key] list_available_orders_column=map_available_orders[column_key] />
					<#-- suggest reorder if the column is not well ordered -->
				</div>
			</#if>
		</#list>
			<#-- not set list -->
			<div class="highlight-box">
				<h2>#i18n{portal.dashboard.title.notSetDashboard}</h2>
				<@dashboardTable items=not_set_dashboards order=false unsetColumn=false/>
			</div>
	</div>
</div>