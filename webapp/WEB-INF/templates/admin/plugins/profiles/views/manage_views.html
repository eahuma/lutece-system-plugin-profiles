<#if permission>
	<div id="content-box-actions">
	    <form method="post"  action="jsp/admin/plugins/profiles/CreateView.jsp">
	        <input class="button bt-toolbar" type="submit" value="#i18n{profiles.manage_views.buttonCreate}" class="button" />
	    </form>
	</div>
</#if>
<div class="content-box">
    <h2>#i18n{profiles.manage_views.pageTitle}</h2>
    <div class="highlight-box">
		<div id="search-views">
			<form method="post" name="search_views" action="jsp/admin/plugins/profiles/ManageViews.jsp"  >
				<p>
					<label for="key" >#i18n{profiles.manage_views.search_views.labelKey} :</label>
					<input type="text" id="key" name="search_key" value="${search_filter.key}" maxlength="50" size="20" />
				</p>
				<p>
					<label for="description" >#i18n{profiles.manage_views.search_views.labelDescription} :</label>
					<input type="text" id="description" name="search_description" value="${search_filter.description}" maxlength="250" size="50" tabindex="2" />
				</p>
				<p>
		           	<input type="submit" value="#i18n{profiles.manage_views.search_views.buttonSearch}" tabindex="6" class="button" name="search_is_search"/>   
		        </p>
			</form>
    	</div>
    </div>
    
    <form method="post" action="jsp/admin/plugins/profiles/ManageViews.jsp">
        <@paginationAdmin paginator=paginator combo=1 form=0 />
        <#if search_is_search >
   			<input type="hidden" name="search_is_search" value="true"/>
   			<input type="hidden" name="search_key" value="${search_filter.key}"/>
   			<input type="hidden" name="search_description" value="${search_filter.description}"/>
        </#if>
    </form>
	<table>
        <tr>
            <th>
            	#i18n{profiles.manage_views.columnKey}
            	<@sort jsp_url="jsp/admin/plugins/profiles/ManageViews.jsp" attribute="key${sort_search_attribute}" />
            </th>
            <th>
            	#i18n{profiles.manage_views.columnDescription}
            	<@sort jsp_url="jsp/admin/plugins/profiles/ManageViews.jsp" attribute="description${sort_search_attribute}" />
            </th>
            <th>#i18n{profiles.manage_views.columnActions}</th>
        </tr>
        <#list list_views as view >
        <tr>
            <td>${view.key}</td>
            <td>${view.description}</td>
            <td>
            	<#if view.actions?exists>
            		<#if view.actions?size != 0>
						<#list view.actions as action>
						 	<a href="${action.url}?view_key=${view.key}">
						  		<img src="${action.iconUrl}" alt="${action.name}" title="${action.description}">
						  	</a>
						</#list>
					<#else>
						&nbsp;
					</#if>
				<#else>
					&nbsp;
				</#if>
            </td>
        </tr>
        </#list>
    </table>
	<@paginationAdmin paginator=paginator />
</div>
