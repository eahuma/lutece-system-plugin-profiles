<div class="row-fluid">
	<div class="span3">
		<fieldset>
    	<legend>#i18n{profiles.manage_views.columnKey} : ${view.key}</legend>
        <p><strong> #i18n{profiles.manage_views.columnDescription}</strong></p>
		<p> ${view.description}</p>
		<p><strong> #i18n{profiles.assign_profiles_view.numberProfiles}</strong> ${assigned_number}</p>
        <p><strong>#i18n{profiles.manage_views.columnActions}</strong></p>
		<p>
		<#if view.actions?exists>
			<#list view.actions as action>
				<a class="btn  <#if action.permission!='DELETE_VIEW'>btn-primary<#else>btn-danger</#if> btn-small" href="${action.url}?view_key=${view.key}"  title="${action.description}" >
					<i class="${action.iconUrl} icon-white"></i>
				</a>
			</#list>
		</#if>
        </p>
		<p><@item_navigation item_navigator=item_navigator /></p>
		<#if assigned_list?size &gt; 0 || search_is_search >
		<form class="form-horizontal" method="post" name="search_profiles" action="jsp/admin/plugins/profiles/AssignProfilesView.jsp"  >
		<input type="hidden" name="view_key" value="${view.key}" />
		<label for="key" >#i18n{profiles.manage_profiles.search_profiles.labelKey} :</label>
		<input type="text" id="key" name="search_key" value="${search_filter.key}" maxlength="50" class="input-mini" />
		<label class="control-label" for="description" >#i18n{profiles.manage_profiles.search_profiles.labelDescription} :</label>
		<input type="text" id="description" name="search_description" value="${search_filter.description}" maxlength="250" class="input-normal" tabindex="2" />
		<button class="btn btn-primary" type="submit" ><i class="icon-search icon-white"></i>&nbsp;#i18n{profiles.assign_profiles_view.labelButtonSearch}</button>
	   	</form>
        </#if>
		</fieldset>
    </div>
	<div class="span9">
		<fieldset>
		<legend>#i18n{profiles.assign_profiles_view.pageTitle}</legend>
	    <#if available_list?size &gt; 0 >
			<form class="form-inline" name="assign-profiles-view" method="post" action="jsp/admin/plugins/profiles/DoAssignProfilesView.jsp">
			<input type="hidden" name="view_key" value="${view.key}" />
			<label for="profiles_list">#i18n{profiles.assign_profiles_view.labelAvailableProfiles}</label>
			<@comboWithParamsAndLength name="profiles_list" default_value="" additionalParameters="multiple='multiple' class='span12'" items=available_list?sort_by('code') max_length=175 />
			<div class="form-actions">
				<#if permission>
					<button class="btn btn-primary" type="submit"><i class="icon-ok icon-white"></i>&nbsp;#i18n{profiles.assign_profiles_view.labelButtonValidate}</button>
				</#if>
				<button class="btn btn-primary" type="submit" ><i class="icon-remove-circle icon-white"></i>&nbsp;#i18n{portal.admin.message.buttonCancel}</button>
			</div>
			</form>
	    <#else>
			<p class="label label-warning">#i18n{profiles.assign_profiles_view.noProfileToAssign}</p>
	    </#if>
		</fieldset>
		<p class="lead">#i18n{profiles.assign_profiles_view.labelAssignedProfiles}</p>
		<#if assigned_list?size &gt; 0 || search_is_search >
			<form class="form-horizontal" method="post" action="jsp/admin/plugins/profiles/AssignProfilesView.jsp">
		    <@paginationAdmin paginator=paginator combo=1 form=0 />
		    <#if search_is_search >
			<input type="hidden" name="search_is_search" value="true"/>
		   	<input type="hidden" name="search_key" value="${search_filter.key}"/>
		   	<input type="hidden" name="search_description" value="${search_filter.description}"/>
		    </#if>
		    <input type="hidden" name="view_key" value="${view.key}" />
		    </form>
	    	<table class="table table-striped table-condensed">
	    		 <tr>
	    		 	<th>
		            	#i18n{profiles.manage_profiles.columnKey}
		            	<@sort jsp_url="jsp/admin/plugins/profiles/AssignProfilesView.jsp" attribute="key${sort_search_attribute}" />
		            </th>
		            <th>
		            	#i18n{profiles.manage_profiles.columnDescription}
		            	<@sort jsp_url="jsp/admin/plugins/profiles/ManageProfiles.jsp" attribute="description${sort_search_attribute}" />
		            </th>          
		            <th>#i18n{profiles.assign_profiles_view.actions}</th>
		        </tr>
	        	<#list assigned_list as assigned_item>
	        		<#if assigned_item_has_next>
	        			<#assign anchor = assigned_item_index>
	        		<#else>
	        			<#assign anchor = assigned_item_index - 1 >
	        		</#if>
		            <tr id="anchor-${assigned_item_index}">
		                <td>${assigned_item.key}</td>
		                <td>${assigned_item.description}</td>
	                    <td>
	                    	<a class="btn btn-primary btn-small" href="jsp/admin/plugins/profiles/ModifyProfile.jsp?profile_key=${assigned_item.key}"  title="#i18n{profiles.actions.labelModify}" >
								<i class="icon-edit icon-white"></i>
							</a>
						<#if permission>
				            <a class="btn btn-danger btn-small" href="jsp/admin/plugins/profiles/DoUnassignProfileView.jsp?view_key=${view.key}&amp;profile_key=${assigned_item.key}&amp;anchor=anchor-${anchor}"  title="#i18n{profiles.assign_profiles_view.actionUnassign}" >
								<i class="icon-trash icon-white"></i>
							</a>
						</#if>
	               		</td>
		            </tr>
	        	</#list>
	   		</table>
	   		<@paginationAdmin paginator=paginator />
	    <#else>
	    	<p class="label label-warning">#i18n{profiles.assign_profiles_view.noAssignedList}</p>
	    </#if>	    
	</div>
</div>