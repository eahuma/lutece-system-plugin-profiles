<div id="left">
    <div class="content-box" >
    	<h2>#i18n{profiles.assign_workgroups_profile.profileKey} : ${profile.key}</h2>
        <table>
            <tr>
                <th>
                     #i18n{profiles.assign_workgroups_profile.profileDescription}
                </th>
            </tr>
            <tr>
                <td>
                    ${profile.description}
                </td>
            </tr>
            <tr>
                <th>
                     #i18n{profiles.assign_workgroups_profile.numberWorkgroups}
                </th>
            </tr>
            <tr>
                <td>
                    ${assigned_number}
                </td>
            </tr>
            <tr>
                <th>
                     #i18n{profiles.assign_workgroups_profile.actions}
                </th>
            </tr>
            <tr>
                <td>
                	<@item_navigation item_navigator=item_navigator />
                	<#if profile.actions?exists>
						<#list profile.actions as action>
						 	<a href="${action.url}?profile_key=${profile.key}">
						  		<img src="${action.iconUrl}" alt="${action.name}" title="${action.description}">
						  	</a>
						</#list>
					</#if>
                </td>
            </tr>
        </table>
    </div>
</div>
<div id="right">
	<div class="content-box">
	    <h2>#i18n{profiles.assign_workgroups_profile.pageTitle}</h2>
	    <div class="multibox"  width="100%">
		     <#if available_list?size &gt; 0 >
		     	<form name="assign-workgroups-profile" method="post" action="jsp/admin/plugins/profiles/DoAssignWorkgroupsProfile.jsp">
		        	<table width="100%" >
			            <tr>
			                <th>
			                    #i18n{profiles.assign_workgroups_profile.labelAvailableWorkgroups}
			                </th>
			            </tr>
			            
		                <tr>
		                 	<td>
		                    	<@comboWithParamsAndLength name="workgroups_list" default_value="" additionalParameters="multiple='multiple' size='10' style='width:100%;'" items=available_list?sort_by('name') max_length=175 />		    
		                    </td>					
		                </tr>
		                <tr>
		                    <td align="center">
		                    	<#if permission>
		                    		<input type="submit" value="#i18n{profiles.assign_workgroups_profile.labelButtonValidate}" class="button" />
		                    	</#if>
		                        <input type="hidden" name="profile_key" value="${profile.key}" />
							    <input type="submit" name="cancel" value="#i18n{portal.admin.message.buttonCancel}" class="button"/>
		                    </td>
		                </tr>
			        </table>
		    	</form>
	    	<#else>
	    		<p>
		          	#i18n{profiles.assign_workgroups_profile.noWorkgroupToAssign}
		        </p>
	        </#if>
	    </div>	
	</div>
	
	<div class="content-box"> 
		<h2>
		    #i18n{profiles.assign_workgroups_profile.labelAssignedWorkgroups}
		</h2>
		
	    <#if assigned_list?size &gt; 0 || search_is_search>
	    	<div class="highlight-box">
				<div id="search-workgroups">
					<form method="post" name="search_workgroups" action="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp"  >
						<p>
							<label for="key" >#i18n{portal.workgroup.manage_workgroups.search_workgroups.labelKey} :</label>
							<input type="text" id="key" name="search_key" value="${search_filter.key}" maxlength="50" size="20" />
						</p>
						<p>
							<label for="description" >#i18n{portal.workgroup.manage_workgroups.search_workgroups.labelDescription} :</label>
							<input type="text" id="description" name="search_description" value="${search_filter.description}" maxlength="250" size="50" tabindex="2" />
						</p>
						<p>
				           	<input type="submit" value="#i18n{portal.workgroup.manage_workgroups.search_workgroups.buttonSearch}" tabindex="6" class="button" name="search_is_search"/>   
				        </p>
				        <input type="hidden" name="profile_key" value="${profile.key}" />
					</form>
		    	</div>
		    </div>
	    	<form method="post" action="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp">
		        <@paginationAdmin paginator=paginator combo=1 form=0 />
		        <#if search_is_search >
		   			<input type="hidden" name="search_is_search" value="true"/>
		   			<input type="hidden" name="search_key" value="${search_filter.key}"/>
		   			<input type="hidden" name="search_description" value="${search_filter.description}"/>
		        </#if>
		        <input type="hidden" name="profile_key" value="${profile.key}" />
		    </form>
	    	<table width="80%">
	    		 <tr>            
		            <th>
		            	#i18n{profiles.assign_workgroups_profile.columnTitleKey}
		            	<@sort jsp_url="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp" attribute="key&profile_key=${profile.key}${sort_search_attribute}" />
		            </th>
		            <th>
		            	#i18n{profiles.assign_workgroups_profile.columnTitleDescription}
		            	<@sort jsp_url="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp" attribute="description&profile_key=${profile.key}${sort_search_attribute}" />
		            </th>
		            <th>#i18n{profiles.assign_workgroups_profile.actions}</th>
		        </tr>
	        	<#list assigned_list as assigned_item>
	        		<#if assigned_item_has_next || assigned_list?size = 1>
	        			<#assign anchor = assigned_item_index>
	        		<#else>
	        			<#assign anchor = assigned_item_index - 1 >
	        		</#if>
		            <tr id="anchor-${assigned_item_index}">
		                <td>${assigned_item.key}</td>
		                <td>${assigned_item.description}</td>
	                    <td>
	                    	<a href="jsp/admin/workgroup/ModifyWorkgroup.jsp?workgroup_key=${assigned_item.key}">
	                    		<img src="images/admin/skin/actions/modify.png" alt="#i18n{profiles.actions.labelModify}" title="#i18n{profiles.actions.labelModify}" />
	                    	</a>
	                    	<#if permission>
				                <a href="jsp/admin/plugins/profiles/DoUnassignWorkgroupProfile.jsp?profile_key=${profile.key}&workgroup_key=${assigned_item.key}&anchor=anchor-${anchor}" >
				                    <img src="images/admin/skin/actions/delete.png" alt="#i18n{profiles.assign_workgroups_profile.actionUnassign}" title="#i18n{profiles.assign_workgroups_profile.actionUnassign}" />
				                </a>
				            </#if>
	               		</td>
		            </tr>
	        	</#list>
	   		</table>
	   		<@paginationAdmin paginator=paginator />
	    <#else>
	    	<p>
	    		#i18n{profiles.assign_workgroups_profile.noAssignedList}
	    	</p>
	    </#if>	    
	</div>
</div>