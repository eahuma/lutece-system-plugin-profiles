<div class="row-fluid">
	<div class="span3">
		<fieldset>
    	<legend>#i18n{profiles.assign_rights_profile.profileKey} : ${profile.key}</legend>
        <p><strong>#i18n{profiles.assign_rights_profile.profileDescription}</strong></p>
		<p>${profile.description}</p>
        <p><strong>#i18n{profiles.assign_rights_profile.actions}</strong></p>
		<p>
		<#if profile.actions?exists>
			<#list profile.actions as action>
				<a class="btn  <#if action.permission!='DELETE_DELETE'>btn-primary<#else>btn-danger</#if> btn-small" href="${action.url}?profile_key=${profile.key}"  title="${action.description}" >
					<i class="${action.iconUrl} icon-white"></i>
				</a>
			</#list>
		</#if>
        </p>
		<p><@item_navigation item_navigator=item_navigator /></p>
		<#if assigned_list?size &gt; 0 || search_is_search>
	    <form class="form" method="post" name="search_workgroups" action="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp"  >
        <input type="hidden" name="profile_key" value="${profile.key}" />
		<label for="key" >#i18n{portal.workgroup.manage_workgroups.search_workgroups.labelKey} :</label>
		<input type="text" id="key" name="search_key" value="${search_filter.key}" maxlength="50" class="input-mini" />
		<label for="description" >#i18n{portal.workgroup.manage_workgroups.search_workgroups.labelDescription} :</label>
		<input type="text" id="description" name="search_description" value="${search_filter.description}" maxlength="250" class="input-normal" tabindex="2" />
		<button class="btn btn-primary btn-small" type="submit" ><i class="icon-search icon-white"></i>&nbsp;#i18n{portal.workgroup.manage_workgroups.search_workgroups.buttonSearch}</button>
		</form>
		</#if>
        </fieldset>
    </div>
	<div class="span9">
		<fieldset>
	    <legend>#i18n{profiles.assign_workgroups_profile.pageTitle}</legend>
	    <#if available_list?size &gt; 0 >
			<form class="form-horizontal" name="assign-workgroups-profile" method="post" action="jsp/admin/plugins/profiles/DoAssignWorkgroupsProfile.jsp">
			<input type="hidden" name="profile_key" value="${profile.key}" />
			<label for="">#i18n{profiles.assign_workgroups_profile.labelAvailableWorkgroups}</label>
			<@comboWithParamsAndLength name="workgroups_list" default_value="" additionalParameters="multiple='multiple' size='10' style='width:100%;'" items=available_list?sort_by('name') max_length=175 />
			<div class="form-actions">		    
				<#if permission>
					<button class="btn btn-primary btn-small" type="submit" ><i class="icon-ok icon-white"></i>&nbsp;#i18n{profiles.assign_workgroups_profile.labelButtonValidate}</button>
				</#if>
				<button class="btn btn-primary btn-small" type="button" onclick="javascript:window.history.back();"><i class="icon-remove-circle icon-white"></i>&nbsp;#i18n{portal.admin.message.buttonCancel}</button>
			</div>
			</form>
	    <#else>
	    		<p>
		          	#i18n{profiles.assign_workgroups_profile.noWorkgroupToAssign}
		        </p>
	        </#if>
		</fieldset>
		<p class="lead">#i18n{profiles.assign_workgroups_profile.labelAssignedWorkgroups}</legend>
		<#if assigned_list?size &gt; 0 || search_is_search>
	    <form class="form-inline" method="post" action="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp">
		<@paginationAdmin paginator=paginator combo=1 form=0 />
		<#if search_is_search >
			<input type="hidden" name="search_is_search" value="true"/>
		   	<input type="hidden" name="search_key" value="${search_filter.key}"/>
		   	<input type="hidden" name="search_description" value="${search_filter.description}"/>
		</#if>
		<input type="hidden" name="profile_key" value="${profile.key}" />
		</form>
	    <table class="table table-striped table-condensed">
			<tr>            
				<th>
					#i18n{profiles.assign_workgroups_profile.columnTitleKey}
		            <@sort jsp_url="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp" attribute="key&profile_key=${profile.key}${sort_search_attribute}" />
		        </th>
		        <th>
					#i18n{profiles.assign_workgroups_profile.columnTitleDescription}
		            <@sort jsp_url="jsp/admin/plugins/profiles/AssignWorkgroupsProfile.jsp" attribute="description&profile_key=${profile.key}${sort_search_attribute}" />
		        </th>
		        <th>#i18n{profiles.assign_workgroups_profile.actions}</th>
		    </tr>
	        <#list assigned_list as assigned_item>
			<#if assigned_item_has_next || assigned_list?size = 1>
				<#assign anchor = assigned_item_index>
	        <#else>
				<#assign anchor = assigned_item_index - 1 >
	        </#if>
		    <tr id="anchor-${assigned_item_index}">
				<td>${assigned_item.key}</td>
		        <td>${assigned_item.description}</td>
	            <td>
					<a class="btn btn-primary btn-small" href="jsp/admin/workgroup/ModifyWorkgroup.jsp?workgroup_key=${assigned_item.key}"  title="#i18n{profiles.actions.labelModify}" >
						<i class="icon-edit icon-white"></i>
					</a>
					<#if permission>
				    <a class="btn btn-danger btn-small" href="jsp/admin/plugins/profiles/DoUnassignWorkgroupProfile.jsp?profile_key=${profile.key}&workgroup_key=${assigned_item.key}&anchor=anchor-${anchor}"  title="#i18n{profiles.assign_workgroups_profile.actionUnassign}" >
						<i class="icon-trash icon-white"></i>
					</a>
					</#if>
	            </td>
		    </tr>
	        </#list>
	   	</table>
	   	<@paginationAdmin paginator=paginator />
	    <#else>
	    	<p class="label label-warning">#i18n{profiles.assign_workgroups_profile.noAssignedList}</p>
	    </#if>	    
	</div>
</div>